// ============================================================================
// Mixed Container
// ============================================================================
@PART[Lynx_LifeSupportModule]:FOR[FelineUtilityRover]:NEEDS[Kerbalism&ProfileDefault]
{
    @description = The Life-Support Module allows you to make longer trips with your rover and keep your kerbals happy!
	@TechRequired = spaceExploration
    @entryCost = 4000
	@cost = 1000
    @tags = ground rover lynx life support cck-rovers cck-lifesupport food water supplies

    MODULE
    {
        name = Configure
        title = Supply Container
        slots = 1

        SETUP
        {
            name = Supplies
            desc = Store a balanced supply of <b>Food</b> and <b>Water</b>.

            RESOURCE
            {
                name = Food
                amount = 740.48296
                maxAmount = 740.48296
            }

            RESOURCE
            {
                name = Water
                amount = 284.51704
                maxAmount = 284.51704
            }
        }

        SETUP
        {
            name = Food

            RESOURCE
            {
                name = Food
                amount = 1025
                maxAmount = 1025
            }
        }

        SETUP
        {
            name = Water

            RESOURCE
            {
                name = Water
                amount = 1025
                maxAmount = 1025
            }
        }
    }
}

@PART[Lynx_CanisterLifeSupport]:FOR[FelineUtilityRover]:NEEDS[Kerbalism&ProfileDefault]
{
    @description = A small pressurized canister to store various gasses you need on longer trips.
	@TechRequired = spaceExploration
    @entryCost = 3000
	@cost = 650
    @tags = kanister lynx life support cck-rovers oxygen co2 h2o nitrogen hydrogen cck-lifesupport

    MODULE
    {
        name = Configure
        title = Pressurized Tank
        slots = 1

        SETUP
        {
            name = Oxygen
            desc = Store liquid oxygen

            RESOURCE
            {
                name = Oxygen
                amount = 80922
                maxAmount = 80922
            }
        }

        SETUP
        {
            name = Nitrogen
            desc = Store liquid nitrogen

            RESOURCE
            {
                name = Nitrogen
                amount = 65940
                maxAmount = 65940
            }
        }

        SETUP
        {
            name = Hydrogen
            desc = Store liquid hydrogen

            RESOURCE
            {
                name = Hydrogen
                amount = 78810
                maxAmount = 78810
            }
        }

        SETUP
        {
            name = Ammonia
            desc = Store liquid ammonia

            RESOURCE
            {
                name = Ammonia
                amount = 91300
                maxAmount = 91300
            }
        }

        SETUP
        {
            name = CarbonDioxide
            desc = Store liquid co2

            RESOURCE
            {
                name = CarbonDioxide
                amount = 0
                maxAmount = 60136
            }
        }
    }
}

// ============================================================================
// Recycler
// ============================================================================

@PART[Lynx_LifeSupportModule]:FOR[FelineUtilityRover]:NEEDS[Kerbalism&ProfileDefault]
{
    MODULE
    {
        name = ProcessController
        resource = _Scrubber
        title = Scrubber
        capacity = 1
        running = true
    }

    MODULE
    {
        name = ProcessController
        resource = _PressureControl
        title = Pressure control
        capacity = 1
        running = true
    }

    MODULE
    {
        name = ProcessController
        resource = _WaterRecycler
        title = Water recycler
        capacity = 1
    }

    MODULE
    {
        name = Configure
        title = Recycler
        slots = 2

        SETUP
        {
            name = Scrubber
            desc = Sequester <b>CarbonDioxide</b> from the internal atmosphere.
            mass = 0.01
            cost = 250

            MODULE
            {
                type = ProcessController
                id_field = resource
                id_value = _Scrubber
            }
        }

        SETUP
        {
            name = Pressure Control
            desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
            tech = engineering101
            mass = 0.01
            cost = 250

            MODULE
            {
                type = ProcessController
                id_field = resource
                id_value = _PressureControl
            }

            RESOURCE
            {
                name = Nitrogen
                amount = 10000
                maxAmount = 10000
            }
        }

        SETUP
        {
            name = Water Recycler
            desc = Filter impurities out of <b>WasteWater</b>.
            tech = spaceExploration
            mass = 0.05
            cost = 500


            MODULE
            {
                type = ProcessController
                id_field = resource
                id_value = _WaterRecycler
            }

            RESOURCE
            {
                name = WasteWater
                amount = 0
                maxAmount = 5
            }
        }
    }

    MODULE:NEEDS[FeatureReliability]
    {
    name = Reliability
    type = ProcessController
    title = ECLSS
    redundancy = Life Support
    repair = true // anyone
    mtbf = 72576000 // 8y
    extra_cost = 2.5
    extra_mass = 0.1
    }
}

// ============================================================================
// Converter
// ============================================================================

@PART[Lynx_CanisterFuelcell]:FOR[FelineUtilityRover]:NEEDS[Kerbalism&ProfileDefault]
{
  !MODULE[ModuleKerbetrotterConverter] {}
  !RESOURCE[ElectricCharge] {}
  !MODULE[Reliability] {}

  MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell
    capacity = 3
  }

  MODULE:NEEDS[FeatureReliability]
  {
    name = Reliability
    type = ProcessController
    title = Fuel Cell
    redundancy = Power Generation
    repair = Engineer
    mtbf = 72576000 // 8y
    extra_cost = 1.0
    extra_mass = 0.5
  }

  @TechRequired = basicScience
}